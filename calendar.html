<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <!-- META -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- FAVICONS ICON -->
    <link rel="icon" type="image/png" href="./assets/images/favicon.svg" />
    <!-- PAGE TITLE HERE -->
    <title>Board</title>
    <link rel="stylesheet" href="./assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="./assets/css/flatpickr.min.css" />
    <link rel="stylesheet" href="./assets/fonts/css/styles.css" />
    <link rel="stylesheet" href="./assets/css/fonts.css" />
    <link rel="stylesheet" href="./assets/css/custom.css" />
  </head>
  <body>
    <!-- aside -->
    <aside class="sidebar">
      <div class="aside_container">
        <div class="aside_logo flex-start gap-2">
          <img src="./assets/images/favicon.svg" class="img max-height" />
          <img
            src="./assets/images/logo_text.svg"
            class="img max-height logo_title"
          />
        </div>
        <ul class="aside_menu custom-ul flex-column-center" id="aside_menu">
          <!-- active li -->
          <li class="parent-nav-item aside_active">
            <h6 class="aside_item_title custom-h">لوحة التحكم</h6>
            <i class="board-dashboard"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">الإجتماعات</h6>
            <i class="board-meeting--1-"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">المهام</h6>
            <i class="board-task"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">إفصاحات</h6>
            <i class="board-accounting"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">التقيمات</h6>
            <i class="board-survey"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">مؤشرات الأداء</h6>
            <i class="board-kpis"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">روابط سريعة</h6>
            <i class="board-link--1-"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">نماذج الملفات</h6>
            <i class="board-open-folder"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">المستندات</h6>
            <i class="board-document"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">الخطة التدريبية</h6>
            <i class="board-training"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">حوكمة الشركات</h6>
            <i class="board-enterprise"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">الدورات لتدريبية</h6>
            <i class="board-book"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">عملية الترشيح</h6>
            <i class="board-democracy"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">تقارير</h6>
            <i class="board-report"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">الإعداادات</h6>
            <i class="board-settings"></i>
          </li>
          <li class="parent-nav-item">
            <h6 class="aside_item_title custom-h">نشاط السجل</h6>
            <i class="board-activities"></i>
          </li>
        </ul>
        <div class="aside_footer_logo text-center flex-center gap-2">
          <h6 class="aside_footer_title fs-16 custom-h">Powered by</h6>
          <img
            src="./assets/images/mazaya_logo.svg"
            class="img max-height mx-0"
          />
        </div>
      </div>
    </aside>
    <!-- header -->
    <header class="header">
      <div class="container-fluid">
        <div class="header-content flex-between flex-wrap gap-3">
          <div class="mainNav">
            <ul class="custom-ul flex-start mainNav-list">
              <li class="mainNav-item flex-column-center">
                <i class="board-calendar"></i>
                <h4 class="mainNav-title custom-h">التقويم</h4>
              </li>
              <li class="mainNav-item flex-column-center">
                <i class="board-meeting"></i>
                <h4 class="mainNav-title custom-h">الاجتماعات</h4>
              </li>
              <li class="mainNav-item flex-column-center">
                <i class="board-megaphone"></i>
                <h4 class="mainNav-title custom-h">الاعلانات</h4>
              </li>
              <li class="mainNav-item flex-column-center">
                <i class="board-advance-search"></i>
                <h4 class="mainNav-title custom-h">بحث متقدم</h4>
              </li>
            </ul>
          </div>
          <div class="navActions flex-center gap-2">
            <div class="dropdown notification navAction_item">
              <button
                class="dropdown-toggle"
                type="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <i class="board-report"></i>
              </button>
              <div class="indicator">10</div>
              <ul class="dropdown-menu custom-dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li>
                  <a class="dropdown-item" href="#">Something else here</a>
                </li>
              </ul>
            </div>
            <div class="dropdown comment navAction_item">
              <button
                class="dropdown-toggle"
                type="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <i class="board-report"></i>
              </button>
              <ul class="dropdown-menu custom-dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li>
                  <a class="dropdown-item" href="#">Something else here</a>
                </li>
              </ul>
            </div>
            <div class="dropdown nav-userProfile">
              <button
                class="dropdown-toggle"
                type="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <img
                  src="https://github.com/mdo.png"
                  alt="hugenerd"
                  width="40"
                  height="40"
                  class="rounded-circle mx-1 mx-md-2"
                />
              </button>
              <ul class="dropdown-menu custom-dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li>
                  <a class="dropdown-item" href="#">Something else here</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Start breadcrumb -->
    <div class="breadcrumb-content">
      <div class="container-fluid">
        <ul class="breadcrumb custom-ul d-flex">
          <li class="active">
            <a href="index.html" class="custom-anc"
              ><i class="board-user--1-"></i
            ></a>
          </li>
          <li>
            <a href="#" class="custom-anc">التقويم</a>
          </li>
        </ul>
      </div>
    </div>
    <!-- End breadcrumb -->

    <!-- main -->
    <div id="content">
      <div class="container-fluid">
        <div class="main-content">
          <div class="calendar flex-column-start gap-3 w-100">
            <!-- filter -->
            <div class="calendar-toolbar flex-between flex-wrap gap-2 w-100">
              <div
                class="d-flex align-items-center gap-2"
                id="toolbar_parent"
              ></div>
              <div class="">
                <div class="form-check form-check-inline">
                  <input
                    class="form-check-input custom-checkbox"
                    type="checkbox"
                    id="inlineCheckbox1"
                    value="option1"
                  />
                  <label class="form-check-label" for="inlineCheckbox1"
                    >المهام</label
                  >
                </div>
                <div class="form-check form-check-inline">
                  <input
                    class="form-check-input custom-checkbox"
                    type="checkbox"
                    id="inlineCheckbox2"
                    value="option2"
                  />
                  <label class="form-check-label" for="inlineCheckbox2"
                    >الإجتماعات</label
                  >
                </div>
              </div>
              <button class="custom-btn secondary-btn min-btn-width" data-bs-toggle="modal" data-bs-target="#addFolder">دمج التقويم</button>
            </div>
            <div class="full_Calendar w-100">
              <div id="examinationCalendar"></div>
            </div>
            <div
              id="eventTooltip"
              class="event-tooltip"
              style="display: none; position: absolute"
            ></div>
          </div>
        </div>
      </div>
    </div>


    <!--  Event Modal -->
    <div class="modal fade custom-modal" id="eventModal" tabindex="-1" data-bs-backdrop="static" aria-labelledby="eventModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="eventTitle"></h5>
            <button type="button" class="btn-close action-btn" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">

            <!-- ✅ التاريخ فقط (لو مفيش وقت) -->
            <div id="eventDateOnly" class="flex-center gap-2 flex-wrap" style="display: none;">
              <div class="card_Details_item">
                <div class="Details_item_icon">
                  <i class="board-calendar"></i>
                </div>
                <div>
                  <h6 class="light-gray fs-12 mb-1">التاريخ</h6>
                  <h6 id="eventDateText"></h6>
                </div>
              </div>
            </div>

            <!-- ✅ من - إلى (لو فيه وقت) -->
            <div id="eventTimeRange" class="flex-center gap-2 flex-wrap" style="display: none;">
              <div class="card_Details_item">
                <div class="Details_item_icon">
                  <i class="board-calendar"></i>
                </div>
                <div>
                  <h6 class="light-gray fs-12 mb-1">من</h6>
                  <h6 id="eventStartTime"></h6>
                </div>
              </div>
              <div class="card_Details_item">
                <div class="Details_item_icon">
                  <i class="board-calendar"></i>
                </div>
                <div>
                  <h6 class="light-gray fs-12 mb-1">إلى</h6>
                  <h6 id="eventEndTime"></h6>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <!-- دمج التقويم modal -->
    <div class="modal fade custom-modal" id="addFolder" tabindex="-1" data-bs-backdrop="static" aria-labelledby="addFolderLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered w-50">
              <div class="modal-content">
                  <div class="modal-header">
                      <h1 class="modal-title" id="addFolderLabel">دمج التقويم <span class="secondary fs-14">اتصال</span></h1>
                      <button type="button" class="btn-close action-btn" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body pt-0">
                         <h3 class="custom-h fs-16 fw-500 title">اشتراك آي كالندر</h3>
                         <ul class="my-3">
                            <li class="fs-14 fw-500 light-gray">يمكن استخدام موجزات تقويم اشتراكات آي كالندر مع تقويم أبل وتقويم جوجل وتقويم أوت لوك وأي خدمة أخرى تدعم تنسيق آي كالند</li>
                            <li class="fs-14 fw-500 light-gray">كن حذرا مع هذا الرابط. فهو غير محمي بكلمة مرور. يمكن لأي شخص لديه هذا الرابط رؤية الأحداث المحملة.</li>
                         </ul>
                          <input type="email" id="email" class="form-control" value="Https/info@gmail.com" readonly/>
                  </div>
                  <div class="modal-footer">
                     <button class="custom-btn primary-btn">نسخ إلي الحافظة</button>
                  </div>
              </div>
          </div>
    </div>

    <script src="./assets/js/bootstrap.bundle.min.js"></script>
    <script src="./assets/js/custom.js"></script>

    <!-- calender js -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.17/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.17/locales/ar.global.min.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let calendarEl = document.getElementById("examinationCalendar");
        let tooltip = document.getElementById("eventTooltip");

        let calendar = new FullCalendar.Calendar(calendarEl, {
          locale: "ar", // 👉 Arabic language
          direction: "rtl",
          initialView: "dayGridMonth",
          initialDate: "2025-07-01",
          events: [
              {
                title: "إجتماع مجلس الإدارة 32/5025",
                start: "2025-07-15",
                className: "event meeting",
                start_time: "5:00 ص",
                end_time: "10:00 ص"
              },
              {
                title: "إجتماع مجلس الإدارة 32/5025",
                start: "2025-07-20",
                className: "event meeting",
                start_time: "5:00 ص",
                end_time: "10:00 ص"
              },
              {
                title: "إجتماع مجلس الإدارة 32/5025",
                start: "2025-07-02",
                className: "event meeting",
                start_time: "5:00 ص",
                end_time: "10:00 ص"
              },
              {
                title: "إجتماع مجلس الإدارة 32/5025",
                start: "2025-07-18",
                className: "event meeting",
                start_time: "7:00 ص",
                end_time: "10:00 ص"
              },
              {
                title: "مهمة تسليم التقرير", // ✅ Event جديد
                start: "2025-07-22",
                className: "event task",
              },
            ],


            
          eventContent: function (arg) {
            const title = arg.event.title;
            const classNames = arg.event.classNames;

            if (classNames.includes("meeting")) {
              // ✅ شكل الـ meeting
              return {
                html: `
                      <div class="flex-start flex-wrap gap-2">
                        <div class="event-time">${
                          arg.event.extendedProps.start_time || ""
                        }</div>
                        <div class="event-title">${arg.event.title}</div>
                      </div>
                    `,
              };
            } else if (classNames.includes("task")) {
              // ✅ شكل الـ task
              return {
                html: `
                  <div class="task-event flex-center">
                    <div>${title}</div>
                  </div>
                `,
              };
            } else {
              // شكل افتراضي لأي نوع تاني
              return {
                html: `
                  <div class="flex-start flex-wrap">
                    <div class="event-time">${start_time}</div>
                    <div class="event-title">${title}</div>
                  </div>
                `,
              };
            }
          },
          // open modal
          eventClick: function (info) {
            const event = info.event;

            const title = event.title;
            const start = event.start ? event.start.toLocaleDateString("ar-EG") : "غير محدد";
            const start_time = event.extendedProps.start_time;
            const end_time = event.extendedProps.end_time;

            document.getElementById("eventTitle").textContent = title;

            if (start_time && end_time) {
              // إظهار من - إلى
              document.getElementById("eventTimeRange").style.display = "flex";
              document.getElementById("eventStartTime").textContent = start_time;
              document.getElementById("eventEndTime").textContent = end_time;

              // إخفاء التاريخ فقط
              document.getElementById("eventDateOnly").style.display = "none";
            } else {
              // إظهار التاريخ فقط
              document.getElementById("eventDateOnly").style.display = "flex";
              document.getElementById("eventDateText").textContent = start;

              // إخفاء من - إلى
              document.getElementById("eventTimeRange").style.display = "none";
            }

            const modal = new bootstrap.Modal(document.getElementById("eventModal"));
            modal.show();
          }
        });
        calendar.render();
        // إخفاء التولتيب عند الضغط خارج الحدث
        document.addEventListener("click", function (e) {
          if (!e.target.closest(".fc-event")) {
            tooltip.style.display = "none";
          }
        });
      });

      document.addEventListener("DOMContentLoaded", function () {
        let headerToolbar = document.querySelector(".fc-header-toolbar");
        let targetContainer = document.querySelector("#toolbar_parent");
        if (headerToolbar && targetContainer && targetContainer.firstChild) {
          targetContainer.insertBefore(
            headerToolbar,
            targetContainer.firstChild
          );
        }
      });
    </script>
  </body>
</html>
